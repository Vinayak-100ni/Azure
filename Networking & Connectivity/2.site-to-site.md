ğŸ” Azure Site-to-Site VPN â€” Complete Steps
ğŸ§© Architecture
On-Prem Network â”€â”€VPN Deviceâ”€â”€Internetâ”€â”€Azure VPN Gatewayâ”€â”€Azure VNet

âœ… Prerequisites

Azure subscription

On-premises VPN device with public IP

On-prem CIDR range (must NOT overlap with Azure VNet)

Azure VNet with GatewaySubnet

ğŸŸ¢ STEP 1: Create Azure Virtual Network

Azure Portal â†’ Virtual Networks

Click + Create

Configure:

Address space: 10.0.0.0/16

Subnet: 10.0.1.0/24

Create

ğŸŸ¢ STEP 2: Create Gateway Subnet

Open your VNet

Go to Subnets

Click + Gateway subnet

CIDR:

10.0.255.0/27 (recommended)

Save

âš ï¸ Subnet name must be GatewaySubnet

ğŸŸ¢ STEP 3: Create Virtual Network Gateway

Azure Portal â†’ Virtual Network Gateways

Click + Create

Configure:

Gateway type: VPN

VPN type: Route-based

SKU: VpnGw1 (or higher)

Virtual network: Select your VNet

Public IP: Create new

Create

â³ Takes 30â€“45 minutes

ğŸŸ¢ STEP 4: Create Local Network Gateway (On-Prem)

Azure Portal â†’ Local Network Gateways

Click + Create

Configure:

Name: OnPrem-LNG

IP address: On-prem VPN public IP

Address space: 192.168.1.0/24 (on-prem CIDR)

Create

ğŸŸ¢ STEP 5: Create Site-to-Site VPN Connection

Go to Virtual Network Gateway

Select Connections

Click + Add

Configure:

Connection type: Site-to-site (IPsec)

Local network gateway: Select OnPrem-LNG

Shared key (PSK): (example)

MyStrongSharedKey123!


Create

ğŸŸ¢ STEP 6: Configure On-Prem VPN Device

Configure your on-prem firewall/router with:

Azure VPN Gateway public IP

On-prem CIDR â†” Azure VNet CIDR

Same PSK

IPsec parameters:

IKEv2

AES256

SHA256

DH Group 14

PFS enabled

ğŸ“Œ Azure provides vendor-specific templates (Cisco, FortiGate, Palo Alto)

ğŸŸ¢ STEP 7: Verify VPN Connection

Azure Portal â†’ Virtual Network Gateway

Open Connections

Status should be:

Connected

ğŸŸ¢ STEP 8: Test Connectivity

From:

On-prem VM â†’ ping Azure VM private IP

Azure VM â†’ ping on-prem private IP

Ensure:

NSGs allow traffic

OS firewalls allow ICMP / required ports
